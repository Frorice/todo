var f=function(){module("event");var e=NEJ.P("nej.p"),t=NEJ.P("nej.e"),n=NEJ.P("nej.v"),a=function(e,a){a=a||t._$get("js-node");var d,i,o,c,u=0,s=function(t){n._$dispatchEvent(t,e)},l=function(e){u=10,d=n._$getElement(e),i=n._$getElement(e,function(e){return"js-node"!=e.id})};n._$addEvent(a,e,l),s(a),equal(d.id,"js-node","获取触发事件的节点"),notEqual(i.id,"js-node","获取触发事件的节点,过滤接口是id不能为js-node"),equal(u,10,"事件添加成功，并且触发了"),u=0,n._$delEvent(a,e,l),s(a),equal(u,0,"事件已经被删除了，所以值不变"),n._$addEvent(a,e,l),n._$clearEvent(a,e),n._$clearEvent(a),s(a),equal(u,0,"所有事件已经被清理了，所以值不变"),n._$addEvent(a,e,l),n._$clearEvent(a,"xxx"),s(a),notEqual(u,0,"清理的类型不对，所以值变了"),n._$clearEvent(a),n._$addEvent(a,e,l),n._$clearEvent(a,"function"),s(a),notEqual(u,0,"清理的类型用关键字试试"),n._$clearEvent(a),u=0,n._$addEvent(a,e,l),s(a.children[0]),equal(u,10,"事件冒泡了"),n._$clearEvent(a),u=0;var l=function(e){n._$stop(e),u=10,d=n._$getElement(e),i=n._$getElement(e,function(e){return"js-node"!=e.id})},r=function(t){n._$stop(t),t.type==e&&(o=n._$pageX(t),c=n._$pageY(t),equal(o,NaN,"结果是事件触发的pageX"),equal(c,NaN,"结果是事件触发的pageY")),u=20,d=n._$getElement(t),i=n._$getElement(t,function(e){return"js-node"!=e.id})};n._$addEvent(a,e,l),n._$addEvent(a.children[0],e,r),s(a.children[0]),equal(u,20,"阻止掉事件冒泡"),u=0,n._$clearEvent(a),n._$clearEvent(a.children[0]),n._$addEvent(a,e,l,!0),n._$addEvent(a.children[0],e,r,!0),s(a.children[0]),equal(u,10,"阻止掉事件捕获")};test("event mouseover",function(){var e="mouseover";a(e)}),test("event click",function(){var e="click";a(e)}),test("event change",function(){var e="change";a(e,t._$get("js-input"))}),module("event常规测试"),test("null",function(){expect(0);var e=t._$get("js-node"),a=function(){};n._$addEvent(e,"click",a),n._$delEvent(null,"click",a)}),test("input event",function(){stop();var e=t._$get("js-input");n._$addEvent(e,"input",function(e){ok(!0,"input text 成功触发input 事件"),start()}),n._$dispatchEvent(e,"input")}),test("textarea event",function(){stop();var e=t._$get("js-textarea");n._$addEvent(e,"input",function(e){ok(!0,"textarea 成功触发input 事件"),start()}),n._$dispatchEvent(e,"input")}),test("load event",function(){stop();var e=t._$get("js-iframe");n._$addEvent(e,"load",function(e){ok(!0,"ifram load事件成功触发"),start()}),e.src="http://www.baidu.com"}),e._$support("css3d")&&test("transitionend event",function(){stop();var e=t._$get("js-node");t._$setStyle(e,"transition-duration","1s"),n._$addEvent(e,"transitionend",function(e){ok(!0,"transitionend 事件成功触发"),start()}),t._$css3d(e,"rotate",{x:2,y:1,z:0,a:"105deg"})}),module("user helper test"),test("检测事件触发点",function(){stop();var e,a,d=function(t){"click"==t.type&&(e=n._$pageX(t),a=n._$pageY(t),equal(typeof e,"number","检测事件触发点pageX"+e),equal(typeof a,"number","检测事件触发点pageY"+a),start())},i=t._$get("js-node");n._$addEvent(i,"click",d),n._$dispatchEvent(i,"click")})};module("依赖模块"),test("define",function(){expect(0),define("{pro}event.test.js",["{lib}base/event.js","{lib}base/element.js"],f)});