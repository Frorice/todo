NEJ.define(["base/util","base/platform"],function(e,t,n,r,a,i){n.__getElementById=function(e,t){if(e.getElementById)return e.getElementById(""+t);try{return e.querySelector("#"+t)}catch(e){return null}},n.__getChildren=function(t){return e._$object2array(t.children)},n.__getElementsByClassName=function(t,n){return e._$object2array(t.getElementsByClassName(n))},n.__nextSibling=function(e){return e.nextElementSibling},n.__previousSibling=function(e){return e.previousElementSibling},n.__dataset=function(e,t,n){return e.dataset=e.dataset||{},void 0!==n&&(e.dataset[t]=n),e.dataset[t]},n.__getAttribute=function(e,t){if("getAttribute"in e)return e.getAttribute(t)},n.__serializeDOM2XML=function(e){return(new XMLSerializer).serializeToString(e)||""},n.__parseDOMFromXML=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").documentElement;return"parsererror"==t.nodeName?null:t},n.__fullScreen=function(){},n.__mask=function(){},n.__unmask=function(){};var s=t._$SUPPORT,u=t._$KERNEL.prefix;return n.__isMatchedName=function(){var e=/^([a-z]+?)[A-Z]/;return function(t,n){return!!(n[t]||e.test(t)&&n[RegExp.$1])}}(),n.__isNeedPrefixed=function(){var t=e._$array2object(["animation","transform","transition","appearance","userSelect","box","flex","column"]);return function(e){return n.__isMatchedName(e,t)}}(),n.__fmtStyleName=function(){var e=/-([a-z])/g;return function(t){return t=t||"",t.replace(e,function(e,t){return t.toUpperCase()})}}(),n.__getStyleName=function(){var e=/^[a-z]/,t=u.css||"";return function(r){return r=n.__fmtStyleName(r),n.__isNeedPrefixed(r)?t+r.replace(e,function(e){return e.toUpperCase()}):r}}(),n.__getStyleValue=function(e,t){var r=window.getComputedStyle(e,null);return r[n.__getStyleName(t)]||""},n.__setStyleValue=function(e,t,r){e.style[n.__getStyleName(t)]=r},n.__getCSSMatrix=function(){var t=/\((.*?)\)/,n=/\s*,\s*/,r=["CSSMatrix",u.clz+"CSSMatrix"],a=["m11","m12","m21","m22","m41","m42"],i=function(r){var i={};return t.test(r||"")&&e._$forEach(RegExp.$1.split(n),function(e,t){i[a[t]]=e}),i};return function(t){var n;return e._$forIn(r,function(e){if(this[e])return n=new this[e](t||""),!0}),n?n:i(t)}}(),n.__injectCSSText=function(e,t){e.textContent=t},n.__processCSSText=function(){var t=/\$<(.*?)>/gi,a=/\{(.*?)\}/g,i="-"+u.css.toLowerCase()+"-",o={scale:"scale({x|1},{y|1})",rotate:"rotate({a})",translate:"translate({x},{y})",matrix:"matrix({m11},{m12},{m21},{m22},{m41},{m42})"},c={scale:"scale3d({x|1},{y|1},{z|1})",rotate:"rotate3d({x},{y},{z},{a})",translate:"translate3d({x},{y},{z})",matrix:"matrix3d({m11},{m12},{m13},{m14},{m21},{m22},{m23},{m24},{m31},{m32},{m33|1},{m34},{m41},{m42},{m43},{m44|1})"},l=function(e,t){return t=t||r,e.replace(a,function(e,n){var r=n.split("|");return t[r[0]]||r[1]||"0"})};return n.__processTransformValue=function(e,t){var n=(s.css3d?c:o)[e.trim()];return n?l(n,t):""},function(r){return r.replace?r.replace(t,function(t,r){if("vendor"===r)return i;var a=(r||"").split("|");return n.__processTransformValue(a[0],e._$query2object(a[1]))||t}):r}}(),n.__appendCSSText=function(e,t){var n=e.sheet,r=n.cssRules.length;return n.insertRule(t,r),n.cssRules[r]},n.__getClassList=function(){var e=/\s+/;return function(t){return t=(t||"").trim(),t?t.split(e):null}}(),n.__processClassName=function(t,r,a){return"replace"==r?(n.__processClassName(t,"remove",a),void n.__processClassName(t,"add",arguments[3])):void e._$forEach(n.__getClassList(a),function(e){t.classList[r](e)})},n.__hasClassName=function(t,r){var a=t.classList;return!(!a||!a.length)&&e._$indexOf(n.__getClassList(r),function(e){return a.contains(e)})>=0},function(){if(!s.css3d){var e=n.__getCSSMatrix();s.css3d=!!e&&null!=e.m41}}(),n});