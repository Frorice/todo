NEJ.define(["./array.js","base/platform"],function(t,r,n,i,o,h){return NEJ.patch("TR<=4.0",function(){var t=Array.prototype,r=function(t){return"[object function]"==i.toString.call(t).toLowerCase()};Array.isArray=function(t){return"[object array]"===i.toString.call(t).toLowerCase()},t.indexOf=function(t,r){var n=parseInt(r)||0;n<0&&(n=Math.max(0,this.length+n));for(var i=this.length;n<i;n++)if(n in this&&t===this[n])return n;return-1},t.lastIndexOf=function(t,r){var n=this.length-1;for(r=parseInt(r),isNaN(r)||(n=r,n<0&&(n=this.length+n));n>=0;n--)if(n in this&&t===this[n])return n;return-1},t.every=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=0,o=this.length;i<o;i++)if(i in this&&!t.call(n,this[i],i,this))return!1;return!0},t.some=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=0,o=this.length;i<o;i++)if(i in this&&t.call(n,this[i],i,this))return!0;return!1},t.forEach=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=0,o=this.length;i<o;i++)i in this&&t.call(n,this[i],i,this)},t.map=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=new Array(this.length),o=0,h=this.length;o<h;o++)o in this&&(i[o]=t.call(n,this[o],o,this));return i},t.filter=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=[],o=0,h=this.length;o<h;o++)o in this&&t.call(n,this[o],o,this)&&i.push(this[o]);return i},t.reduce=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=arguments.length>1,o=0,h=this.length;o<h;o++)o in this&&(i?n=t(n,this[o],o,this):(i=!0,n=this[o]));if(!i)throw new Error("Reduce of empty array with no initial value");return n},t.reduceRight=function(t,n){if(!r(t))throw new Error(t+" is not a function");for(var i=arguments.length>1,o=this.length-1;o>=0;o--)o in this&&(i?n=t(n,this[o],o,this):(i=!0,n=this[o]));if(!i)throw new Error("Reduce of empty array with no initial value");return n}}),t});