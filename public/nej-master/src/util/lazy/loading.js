NEJ.define(["base/klass","base/element","base/util","util/event"],function(e,t,_,o,n,i,s,r,c){n._$$LazyLoading=e._$klass(),c=n._$$LazyLoading._$extend(o._$$EventTarget),c.__reset=function(e){this.__super(e),this.__name=e.attr||"",this.__parent=t._$get(e.parent),this.__doInitDomEvent([[this.__parent||window,"scroll",this.__doCheckScrollPosition._$bind(this)]]),this._$refresh()},c.__destroy=function(){delete this.__parent,this.__super()},c.__getScrollViewPort=function(){return this.__parent||t._$getPageBox()},c.__getSettingInfo=function(e){var o={};return _._$forEach(this.__name.split(","),function(_){o[_]=t._$dataset(e,_)}),o},c.__doCheckScrollPosition=function(){var e={"-1":"onremove",1:"onappend"};return function(t){var o=this.__getResourceList(this.__parent||document),n=this.__getScrollViewPort();_._$forEach(o,function(t){var _={target:t,config:n};this._$dispatchEvent("oncheck",_);var o=_.value;null==o&&(o=this.__doCheckResource(t,n));var i=e[o];if(i){var _={target:t,config:this.__getSettingInfo(t)};this._$dispatchEvent(i,_),_.stopped||(o==-1?this.__doRemoveResource(t):this.__doAppendResource(t,_.config))}},this)}}(),c.__getResourceList=s,c.__doCheckResource=s,c.__doRemoveResource=s,c.__doAppendResource=s,c._$refresh=function(){this.__doCheckScrollPosition()}});