NEJ.define(["base/klass","base/event","util/template/tpl","util/dispatcher/module"],function(e,_,n,i,t){var s;return t._$$RegularModule=e._$klass(),s=t._$$RegularModule._$extend(i._$$ModuleAbstract),s.__build=function(){this._$innerModule=(new this._$$InnerModule).$inject(this.__body),this.__export.parent=this._$innerModule.$refs.view,this._$innerModule.__doSendMessage=this.__doSendMessage._$bind(this)},s.__init=function(e){this.__super(e),this.__nodeKey=n._$addNodeTemplate("<div></div>"),this.__body=n._$getNodeTemplate(this.__nodeKey),this.__build()},s.__onShow=function(e){null===this._$innerModule._watchers&&this.__build(),this.__super(e),this._$innerModule.__onShow&&(this._$innerModule.data.$param=e.param,this._$innerModule.data.$params=e.href.split("?")[1],this._$innerModule.__onShow(e),this._$innerModule.$update())},s.__onRefresh=function(e){this.__super(e),this._$innerModule.__onRefresh&&(this._$innerModule.data.$param=e.param,this._$innerModule.data.$params=e.href.split("?")[1],this._$innerModule.__onRefresh(e),this._$innerModule.$update())},s.__onMessage=function(e){this.__super(e),this._$innerModule.__onMessage&&(this._$innerModule.__onMessage(e),this._$innerModule.$update())},s.__onBeforeHide=function(e){this.__super(e),this._$innerModule.__onBeforeHide&&(this._$innerModule.__onBeforeHide(e),this._$innerModule.$update())},s.__onHide=function(){this.__super(),this._$innerModule.__onHide&&(this._$innerModule.__onHide(),this._$innerModule.$update())},s.__destroy=function(){this.__body=n._$getNodeTemplate(this.__nodeKey),this._$innerModule.destroy(),delete this.__nodeKey,this.__super()},t._$regist=function(n,s){var o=e._$klass(),d=o._$extend(t._$$RegularModule);return d.__init=function(){this.__umiAlias=n,this._$$InnerModule=s,this.__super()},_._$addEvent(document,"templateready",function(){i._$regist(n,o)}),o},t});