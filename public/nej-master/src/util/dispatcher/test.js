NEJ.define(["base/event","util/template/tpl","util/history/history","./module.js"],function(t,e,o,n,a,r,c,i){return n._$regist=n._$regist._$aop(function(e){e.stopped=!0;var o=e.args[1],n=o._$allocate();n.count=0,t._$addEvent(location,"urlchange",function(){n.count++;var t=location.parse(location.hash.substr(1));t.param=t.query,t.parent=document.mbody||document.body,n._$dispatchEvent(1==n.count?"onshow":"onrefresh",t)}),location.active()}),a._$testByTemplate=function(t){e._$parseTemplate(t||"template-box")},a});