NEJ.define(["base/global","base/klass","base/util","util/event"],function(t,e,n,_,i,r,s,h){var a;return i._$$Node=e._$klass(),a=i._$$Node._$extend(_._$$EventTarget),a.__init=function(){this.__super(),this.__children=[]},a.__reset=function(t){this.__super(t),this._$setParent(t.parent),this.__name=t.name||"/",this.__data=t.data||{}},a.__destroy=function(){var t=function(t,e,n){n.splice(e,1),t._$recycle()};return function(){this.__super(),delete this.__data,n._$reverseEach(this.__children,t),this._$setParent(null)}}(),a.__isNode=function(t){return t instanceof this.constructor},a.__hasChild=function(t){return n._$indexOf(this.__children,t)>=0},a._$getName=function(){return this.__name},a._$getData=function(){return this.__data},a._$getPath=function(){var t=this._$getParent(),e=this._$getName();if(!t)return e;var n=t._$getName();return"/"!=n&&"/"!=e&&(e="/"+e),t._$getPath()+e},a._$getParent=function(){return this.__parent},a._$getChildren=function(){return this.__children},a._$getChildByName=function(t){var e=n._$indexOf(this.__children,function(e){return t==e._$getName()});return this.__children[e]||null},a._$setParent=function(t){t=this.__isNode(t)?t:null,t!=this.__parent&&(t?t._$appendChild(this):this.__parent._$removeChild(this),this.__parent=t)},a._$appendChild=function(t){t=this.__isNode(t)?t:null,t&&!this.__hasChild(t)&&(this.__children.push(t),t._$setParent(this))},a._$removeChild=function(t){t=this.__isNode(t)?t:null;var e=n._$indexOf(this.__children,t);return e>=0&&(this.__children.splice(e,1),t._$setParent(null)),t},i});