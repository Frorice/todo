NEJ.define(["./cursor.js","base/platform","base/element"],function(t,e,o,n,r,a,c){return NEJ.patch("TR",function(){t.__getCursorPXPosition=function(t){t.focus();var e=document.selection.createRange(),n=o._$getPageBox(),r=o._$offset(t);return{top:e.boundingTop-r.y+n.scrollTop,left:e.boundingLeft-r.x+n.scrollLeft,width:e.boundingWidth,height:e.boundingHeight}}}),NEJ.patch("TR<=4.0",function(){t.__setCursorPosition=function(t,e){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",e.start),o.moveEnd("character",e.end-e.start),o.select(),t.focus()},t.__getCursorPosition=function(t){var e=document.selection.createRange(),o=t.createTextRange();o.moveToBookmark(e.getBookmark());var n=t.createTextRange();n.collapse(!0),n.setEndPoint("EndToStart",o);var r=n.text.length;return{start:r,end:r+e.text.length}}}),t});