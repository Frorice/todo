NEJ.define(["base/event","./history.js"],function(i,t,o,r,n,s){var e=!1,h=[];return history.index=0,history.size=h.length,history.go=function(i){if(history.size<2)return this;var t=history.index+i;history.index=Math.max(0,Math.min(t,history.size-1)),e=!0,location.redirect(h[history.index],!0)},history.pop=function(){h.pop(),history.size=h.length,history.index=Math.min(history.index,history.size-1)},history.back=function(){history.go(-1)},history.forward=function(){history.go(1)},i._$addEvent(location,"urlchange",function(i){if(e)return void(e=!1);var t=i.href,o=h[history.index];if(t!=o){null!=o&&history.index++,h[history.index]=t,history.size=history.index+1;var r=h.length-history.size;r>0&&h.splice(history.size,r)}}),o});