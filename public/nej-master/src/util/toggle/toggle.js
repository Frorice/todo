NEJ.define(["base/global","base/element","base/util","base/event","base/chain"],function(e,l,t,n,a,g,o,s,c){return g._$toggle=function(){var e=function(e,t){var n=l._$get(e.element),a=e.clazz,g={event:t,clazz:a,target:n,source:l._$get(e.source)};e.onbeforetoggle.call(null,g),g.stopped||(l._$hasClassName(n,a)?(g.toggled=!1,l._$delClassName(n,a)):(g.toggled=!0,l._$addClassName(n,a)),e.ontoggle.call(null,g))};return function(a,g){if(a=l._$get(a)){var o={ontoggle:s,onbeforetoggle:s,clazz:"js-toggle",source:l._$id(a),element:a.parentNode};if(t._$isString(g)){var c=l._$get(g);c?o.element=c:o.clazz=g}else t._$fetch(o,g),o.element=l._$get(o.element);o.element=l._$id(o.element),n._$addEvent(a,"click",e._$bind(null,o))}}}(),a._$merge(g),CMPT&&e.copy(e.P("nej.e"),g),g});