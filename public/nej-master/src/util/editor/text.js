NEJ.define(["base/klass","base/element","util/event","util/template/jst","text!./text.html"],function(t,e,n,o,_,i,s){var r=o._$add(_);i._$$Editor=t._$klass(),s=i._$$Editor._$extend(n._$$EventTarget),s.__init=function(t){this.__sopt={},this.__fopt={visible:!0,onload:this.__onIFrameLoaded._$bind(this)},this.__super(t)},s.__reset=function(t){this.__super(t),this.__sopt.css=t.css||"",this.__fopt.parent=e._$get(t.parent),this.__body=e._$createXFrame(this.__fopt)},s.__destroy=function(){this.__super(),this._$setContent(""),delete this.__body},s.__getBody=function(){try{return this.__body.contentWindow.document.body}catch(t){}},s.__onIFrameLoaded=function(){var t=this.__body.contentWindow.document;t.open(),t.write(o._$get(r,this.__sopt)),t.close(),this.__doInitDomEvent([[t,"paste",this.__onContentPaste._$bind(this)],[t,"beforepaste",this.__onBeforeContentPaste._$bind(this)],[t,"drop",this.__onContentPaste._$bind(this)],[t,"keydown",this.__doCheckEnter._$bind(this)]])},s.__doCheckEnter=function(t){if(13==t.keyCode){var e={ctrl:t.ctrlKey,event:t};this._$dispatchEvent("onenter",e),e.newline&&e.ctrl}},s.__doCheckContentPaste=function(){this._$setContent(this._$getContent())},s.__onContentDrop=function(t){},s.__onBeforeContentPaste=function(t){console.log(t)},s.__onContentPaste=function(t){console.log(t)},s._$setContent=function(t){var e=this.__getBody();e&&("innerText"in e?e.innerText=t||"":e.textContent=t||"")},s._$getContent=function(){var t=this.__getBody();return t?t.innerText||t.textContent:""},s._$getScrollHeight=function(){var t=this.__getBody();return t?t.scrollHeight:0}});