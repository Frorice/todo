NEJ.define(["base/global","base/klass","util/editor/command/card","ui/editor/command/link"],function(n,_,t,i,a,o,r,e){var s;return a._$$Link=_._$klass(),s=a._$$Link._$extend(t._$$CardCommand),a._$$Link.command="link",s.__onChange=function(n){if(n){var _=""!=n.name?n.name:n.href;this.__editor._$execCommand("inserthtml",'<a target="_blank" href="'+n.href+'">'+_+"</a>"),this.__editor._$focus(3)}},s.__doShowCard=function(){this.__fopt.name=this.__editor._$getSelectText(),this.__linkCard=this.__onShowCard(),this.__linkCard._$show(),this.__linkCard._$doFocus()},s.__onShowCard=function(){return i._$$LinkCard._$allocate({draggable:!0,destroyable:!0,maskclazz:"m-mask",name:this.__fopt.name,title:"添加超链接",onchange:this.__onChange._$bind(this),onErrorLink:this.__onError._$bind(this)})},s.__onError=function(){this.__linkCard.__showErrorTips("请输入合法的链接地址（http://或https://）")},a._$$Link._$regist(),CMPT&&n.copy(n.P("nej.ut.cmd"),a),a});