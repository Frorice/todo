NEJ.define(["base/global","base/klass","base/element","util/event","util/helper/select"],function(t,e,_,i,s,n,h,l,o){var u;return n._$$Suggest=e._$klass(),u=n._$$Suggest._$extend(i._$$EventTarget),u.__init=function(){this.__sopt={loopable:!0,onselect:this.__onSelect._$bind(this),onchange:this.__onSelectionChange._$bind(this)},this.__super()},u.__reset=function(t){this.__super(t),this.__auto=!!t.autofill,this.__input=_._$get(t.input),this.__sopt.clazz=t.clazz,this.__sopt.parent=_._$get(t.body),this.__sopt.selected=t.selected||"js-selected",this.__doInitDomEvent([[this.__input,"input",this.__onInput._$bind(this)],[this.__input,"focus",this.__onInput._$bind(this)]]),t.noblur||this.__doInitDomEvent([[this.__input,"blur",this.__onBlur._$bind(this)]]),this._$visibile(!1),this.__helper=s._$$SelectHelper._$allocate(this.__sopt)},u.__destroy=function(){this.__super(),this.__helper&&(this.__helper._$recycle(),delete this.__helper),delete this.__xxx,delete this.__input,delete this.__sopt.parent},u.__onBlur=function(){this.__onSelect({target:this.__helper._$getSelectedNode()})},u.__onInput=function(){var t=this.__input.value.trim();t?this.__xxx||this._$dispatchEvent("onchange",t):this._$visibile(!1)},u.__doUpdateValue=function(t){this.__xxx||(this.__xxx=!0,t&&t!=this.__input.value&&(this.__input.value=t),this.__xxx=!1)},u.__onSelect=function(t){var e=_._$dataset(t.target,"value")||"";this.__doUpdateValue(e),e=e||this.__input.value,this._$update(""),this._$dispatchEvent("onselect",e,{target:t.target,enter:t.enter,value:e})},u.__onSelectionChange=function(t){this.__auto&&this.__doUpdateValue(_._$dataset(t.target,"value")||"")},u._$setList=function(t){this._$visibile(!!t&&t.length>0)},u._$visibile=function(t){var t=t?"visible":"hidden";this.__sopt.parent.style.visibility=t,"hidden"===t&&(this.__sopt.parent.innerHTML="")},u._$update=function(t){this.__sopt.parent.innerHTML=t||"&nbsp;",this._$visibile(!!t)},CMPT&&t.copy(t.P("nej.ut"),n),n});