NEJ.define(["base/global","base/element","base/event","base/util","base/chain","{platform}counter.js"],function(n,e,t,a,r,i,l,u,g,o){return l._$counter=function(){var n={},r=function(n){return i.__length(n)},l=function(t){var a=n[t],r=e._$get(t),i=e._$get(a.xid);if(r&&a){var l={input:r.value};l.length=a.onlength(l.input),l.delta=a.max-l.length,a.onchange(l),i.innerHTML=l.value||"剩余"+Math.max(0,l.delta)+"个字"}};return function(i,u){var o=e._$id(i);if(o&&!n[o]){var c=a._$merge({},u);if(c.onchange=c.onchange||g,c.onlength=r,!c.max){var _=parseInt(e._$attr(o,"maxlength")),h=parseInt(e._$dataset(o,"maxLength"));c.max=_||h||100,!_&&h&&(c.onlength=a._$length)}n[o]=c,t._$addEvent(o,"input",l._$bind(null,o));var d=e._$wrapInline(o,{nid:c.nid||"js-counter",clazz:c.clazz});c.xid=e._$id(d),l(o)}}}(),r._$merge(l),CMPT&&n.copy(n.P("nej.e"),l),l});