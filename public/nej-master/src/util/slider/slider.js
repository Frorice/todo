NEJ.define(["base/global","base/klass","base/element","base/event","util/event","util/dragger/simple"],function(t,e,_,i,s,n,o,h,r,a){var d;return o._$$Slider=e._$klass(),d=o._$$Slider._$extend(s._$$EventTarget),d.__init=function(){this.__dopt={onchange:this.__onChange._$bind(this),ondragend:this.__onChange._$bind2(this,!0)},this.__super()},d.__reset=function(t){this.__super(t),this.__dopt.view=_._$get(t.track),this.__dopt.body=_._$get(t.thumb)||_._$get(t.slide),this.__dopt.mbar=this.__dopt.view,this.__dopt.direction=parseInt(t.direction)||0,this._$setRange(t.range),this.__doInitDomEvent([[this.__dopt.view,"mousedown",this.__onSlideToPosition._$bind(this)]]),this.__dragger=n._$$Dragger._$allocate(this.__dopt)},d.__destroy=function(){this.__super(),this.__dragger._$recycle(),delete this.__dragger,delete this.__range,delete this.__dopt.view,delete this.__dopt.body,delete this.__dopt.mbar},d.__onChange=function(t,e){var _=t.left/this.__range.x[1],i=t.top/this.__range.y[1],s=this.__range.x,n=this.__range.y;this._$dispatchEvent("onchange",{stopped:!!e,x:{rate:_,value:_*(s[1]-s[0])},y:{rate:i,value:i*(n[1]-n[0])}})},d.__onSlideToPosition=function(t){var e=_._$offset(this.__dopt.view),s={x:i._$clientX(t),y:i._$clientY(t)};this.__dragger._$setPosition({top:s.y-e.y,left:s.x-e.x})},d._$setRange=function(t){var e;if(this.__range){var _=this.__dragger._$getPosition();e={x:_.left/this.__range.x[1],y:_.top/this.__range.y[1]}}t=t||h;var i=(t.x||a)[1]||this.__dopt.view.clientWidth-this.__dopt.body.offsetWidth,s=(t.y||a)[1]||this.__dopt.view.clientHeight-this.__dopt.body.offsetHeight;this.__range={x:t.x||[0,i],y:t.y||[0,s]},e&&this._$setPosition(e)},d._$setPosition=function(t){t=t||h,this.__dragger._$setPosition({top:this.__range.y[1]*(t.y||0),left:this.__range.x[1]*(t.x||0)})},CMPT&&t.copy(t.P("nej.ut"),o),o});