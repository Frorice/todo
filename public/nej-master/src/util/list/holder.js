NEJ.define(["base/global","base/klass","base/util","base/element","util/event"],function(t,e,i,_,s,o,h,l,n){var d;return o._$$ListHolder=e._$klass(),d=o._$$ListHolder._$extend(s._$$EventTarget),d.__init=function(){var t={height:0,overflow:"hidden",visibility:"hidden"},e=function(e){_._$style(e,t)};return function(){this.__holders={top:_._$create("div"),bottom:_._$create("div")},i._$loop(this.__holders,e),this.__super()}}(),d.__reset=function(){var t=function(t){_._$setStyle(t,"height",0)};return function(e){this.__super(e),this._$limit(e.limit),this.__clazz=e.clazz||"js-item",this.__fixed=e.fixed,null==this.__fixed&&(this.__fixed=!0),this.__sbody=_._$get(e.sbody),this.__doInitDomEvent([[this.__sbody,"scroll",this.__doScrollCheck._$bind(this)]]),this.__hbody=_._$get(e.hbody)||this.__sbody,this.__hbody&&(this.__fragments={tlist:[],blist:[],top:document.createDocumentFragment(),bottom:document.createDocumentFragment()},i._$loop(this.__holders,t),this.__hbody.appendChild(this.__holders.bottom),this.__hbody.insertAdjacentElement("afterBegin",this.__holders.top)),this.__sbody&&this.__doScrollCheck()}}(),d.__destroy=function(){this.__super(),this._$clearHolder(),delete this.__fragments,delete this.__clazz,delete this.__fixed,delete this.__limit,delete this.__sbody,delete this.__hbody},d.__doScrollCheck=function(t){this._$check({scrollTop:this.__sbody.scrollTop,clientHeight:this.__sbody.clientHeight,list:_._$getByClassName(this.__hbody,this.__clazz)})},d._$limit=function(t){i._$isArray(t)||(t=parseInt(t)||10,t=[t,t]),this.__limit=t},d._$check=function(){return function(t){var e=t.list;if(e&&e.length){var s,o,h,l,n=t.offset,d=t.scrollTop,r=d+t.clientHeight;i._$forIn(e,function(t,e,i){if(null==n?(n=_._$offset(t,this.__sbody).y,this.__fixed&&(h=t.offsetHeight)):n+=this.__fixed?h:i[e-1].offsetHeight,l=n+(null!=h?h:t.offsetHeight),null==s&&n<=d&&d<=l&&(s=e),null==o&&n<=r&&r<=l)return o=e,!0},this)}}}(),d._$clearHolder=function(){i._$loop(this.__holders,_._$removeByEC),this.__hbody&&(this.__hbody.appendChild(this.__fragments.bottom),this.__hbody.insertAdjacentElement("afterBegin",this.__fragments.top),delete this.__fragments.tlist,delete this.__fragments.blist)},CMPT&&t.copy(t.P("nej.ut"),o),o});