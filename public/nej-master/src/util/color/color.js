NEJ.define(["base/global","base/util"],function(r,n,t,u,o,a){return t._$isColor=function(){var r=/^#(?:[0-9a-f]{3}){1,2}$/i;return function(n){return r.test(n)}}(),t._$isFullColor=function(){var r=/^#[0-9a-f]{6}$/i;return function(n){return r.test(n)}}(),t._$color2rgb=function(){var r=function(r,n,t){t[n]+=r};return function(u){if(!t._$isColor(u))return null;if(u=u.substr(1),3==u.length){var o=u.split("");n._$forEach(o,r),u=o.join("")}return{r:parseInt(u.substr(0,2),16),g:parseInt(u.substr(2,2),16),b:parseInt(u.substr(4,2),16)}}}(),t._$rgb2color=function(){function r(r){return r=parseInt(r,10),isNaN(r)?"00":(r=Math.max(0,Math.min(r,255)),n.charAt((r-r%16)/16)+n.charAt(r%16))}var n="0123456789abcdef";return function(n){return"#"+r(n.r)+r(n.g)+r(n.b)}}(),t._$rgb2hsl=function(r){var n=r.r,t=r.g,u=r.b;n/=255,t/=255,u/=255;var o,a,e=Math.max(n,t,u),s=Math.min(n,t,u),i=e-s,c=(e+s)/2;if(0==i)o=a=0;else{var i=e-s;switch(a=c>.5?i/(2-e-s):i/(e+s),e){case n:o=(t-u)/i+(t<u?6:0);break;case t:o=(u-n)/i+2;break;case u:o=(n-t)/i+4}o/=6}return{h:o,s:a,l:c}},t._$hsl2rgb=function(){var r=function(r,n,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(n-r)*t:t<.5?n:t<2/3?r+(n-r)*(2/3-t)*6:r};return function(n){var t,u,o;if(0==n.s)t=u=o=n.l;else{var a=n.l,e=n.s,s=n.h,i=a<.5?a*(1+e):a+e-a*e,c=2*a-i;t=r(c,i,s+1/3),u=r(c,i,s),o=r(c,i,s-1/3)}return{r:Math.round(255*t),g:Math.round(255*u),b:Math.round(255*o)}}}(),t._$hsl2color=function(r){return t._$rgb2color(t._$hsl2rgb(r))},t._$color2hsl=function(r){return t._$rgb2hsl(t._$color2rgb(r))},CMPT&&r.copy(r.P("nej.ut.c"),t),t});