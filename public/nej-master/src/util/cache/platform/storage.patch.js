NEJ.define(["base/event","./storage.js"],function(e,t,n,o,a,r){return NEJ.patch("TR<=3.0",["base/config","util/flash/flash"],function(n,o){var a,r=function(){a||o._$flash({hidden:!0,src:n._$get("storage.swf"),params:{AllowScriptAccess:"sameDomain"},onready:function(t){t?(a=t,a.initStorage("nej-storage")):console.log("flash for localStorage unavailable"),e._$dispatchEvent(document,"storageready")}})};t.__getItemInStorage=function(e){if(a)return a.getItem(e)},t.__setItemToStorage=function(e,t){a&&a.setItem(e,t)},t.__removeItemFromStorage=function(e){a&&a.removeItem(e)},t.__clearStorage=function(){a&&a.clear()},t.__initStorage=function(){r()},t.__isStorageReady=function(){return!!a}}),t});