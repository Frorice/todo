NEJ.define(["base/element","base/event","base/util","{platform}effect.api.js","util/effect/effect","base/chain"],function(t,e,n,i,o,f,a,c,r,l){return a.__initOptions=function(t){return t=t||{},t.onstop=t.onstop||r,t.onplaystate=t.onplaystate||r,t},a.__doBeforeStart=function(){var e=function(e,o){var f,a=!0;return n._$forIn(o,function(n,o){"opacity"===o?(f=i.__formatNumber?i.__formatNumber(e):t._$getStyle(e,o),n=i.__formatTo?i.__formatTo(n):n):f=t._$getStyle(e,o),parseInt(f)===n&&(a=!1)}._$bind(this)),a};return function(t,n){return!!e(t,n)}}(),a.__doFade=function(){var e=function(e){var n=t._$getStyle(e,"display");return"none"!==n};return function(n,i,f){var c=i.opacity||f;return n=t._$get(n),!!e.call(n)&&(!n.effect&&(!!a.__doBeforeStart(n,{opacity:c})&&(i=a.__initOptions(i),n.effect=o._$$Effect._$allocate({node:n,transition:[{property:"opacity",timing:i.timing||"ease-in",delay:i.delay||0,duration:i.duration||1}],styles:["opacity:"+c],onstop:function(t,e){n.effect=o._$$Effect._$recycle(n.effect),i.onstop.call(null,t,e)},onplaystate:i.onplaystate._$bind(n.effect)}),void n.effect._$start())))}}._$bind(this)(),a._$fadeIn=function(t,e){return a.__doFade(t,e,1)},a._$fadeOut=function(t,e){return a.__doFade(t,e,0)},a._$fadeStop=function(t){a._$stopEffect(t)},a._$stopEffect=function(e){e=t._$get(e),e.effect&&e.effect._$stop(!0)},a._$moveTo=function(e,n,i){if(e=t._$get(e),e.effect)return!1;if(!a.__doBeforeStart(e,n))return!1;i=a.__initOptions(i),i.duration=i.duration||[];var f=n.top||0,c=n.left||0;e.effect=o._$$Effect._$allocate({node:e,transition:[{property:"top",timing:i.timing||"ease-in",delay:i.delay||0,duration:i.duration[0]||1},{property:"left",timing:i.timing||"ease-in",delay:i.delay||0,duration:i.duration[1]||1}],styles:["top:"+f,"left:"+c],onstop:function(t,n){e.effect=o._$$Effect._$recycle(e.effect),i.onstop.call(null,t,n)},onplaystate:i.onplaystate._$bind(e.effect)}),e.effect._$start()},a._$slide=function(e,n,i){if(e=t._$get(e),e.effect)return!1;i=a.__initOptions(i);var f=n.split(":"),c=f[0],r=[];r.push(n),e.effect=o._$$Effect._$allocate({node:e,transition:[{property:c,timing:i.timing||"ease-in",delay:i.delay||0,duration:i.duration||1}],styles:r,onstop:function(t,n){e.effect=o._$$Effect._$recycle(e.effect),i.onstop.call(null,t,n)},onplaystate:i.onplaystate._$bind(e.effect)}),e.effect._$start()},a._$toggleEffect=function(){var e=function(t,e){return"height"==e?t.clientHeight:t.clientWidth};return function(n,i,f){if(n=t._$get(n),n.effect)return!1;f=a.__initOptions(f);var c=f.value||!1;if(!c){t._$setStyle(n,"display","block");var n=t._$get(n);c=e(n,i)}var r=t._$getStyle(n,"visibility");"hidden"===r?(n.style.height=0,t._$setStyle(n,"visibility","inherit"),n.effect=o._$$Effect._$allocate({node:n,transition:[{property:i,timing:f.timing||"ease-in",delay:f.delay||0,duration:f.duration||1}],styles:[i+":"+c],onstop:function(t,e){n.effect=o._$$Effect._$recycle(n.effect),f.onstop.call(null,t,e),l=window.clearTimeout(l)},onplaystate:f.onplaystate._$bind(n.effect)})):(n.style.height=isNaN(c)?c:c+"px",n.effect=o._$$Effect._$allocate({node:n,transition:[{property:i,timing:f.timing||"ease-in",delay:f.delay||0,duration:f.duration||1}],styles:[i+":0"],onstop:function(e,a){t._$setStyle(n,"visibility","hidden"),t._$setStyle(n,i,"auto"),n.effect=o._$$Effect._$recycle(n.effect),f.onstop.call(null,e,a),l=window.clearTimeout(l)},onplaystate:f.onplaystate._$bind(n.effect)}));var l=window.setTimeout(function(){n.effect._$start()}._$bind(this),0)}}(),f._$merge(a),CMPT&&NEJ.copy(NEJ.P("nej.e"),a),a});