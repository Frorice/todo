NEJ.define(["base/util","base/event","base/element"],function(t,e,n,i){return i.__doDumpFile=function(t,e){var n={type:"file",content:t,url:URL.createObjectURL(t)};if(e.dataurl){var i=new FileReader;i.onload=function(t){n.dataurl=t.target.result,e.onpaste(n)},i.readAsDataURL(t)}else e.onpaste(n)},i.__doDumpImage=function(){var t=n._$create("div");return t.contentEditable=!0,n._$style(t,{position:"absolute",top:0,left:"300px",width:"200px",height:"200px",border:"1px solid #aaa"}),document.body.appendChild(t),function(e){t.focus(),window.setTimeout(function(){var n=t.getElementsByTagName("img")[0];n&&e.onpaste({type:"file",url:n.src,content:n.src,dataurl:n.src})},15)}}(),i.__doDumpContent=function(){var n={string:function(t,e){t.getAsString(function(t){e.onpaste({type:"string",content:t||""})})},file:function(t,e){i.__doDumpFile(t.getAsFile(),e)}};return function(i,a){var o=i.accept||"",r=a.clipboardData||{};t._$forEach(r.items,function(r){if(!o||0==r.type.indexOf(o)){e._$stop(a);var u=n[r.kind];return t._$isFunction(u)&&u(r,i),!0}})}}(),i});