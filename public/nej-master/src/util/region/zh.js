NEJ.define(["base/global","base/klass","base/element","base/util","util/event"],function(e,t,_,i,s,a,c,n,h){var o;return a._$$RegionSelector=t._$klass(),o=a._$$RegionSelector._$extend(s._$$EventTarget),o.__reset=function(e){if(this.__super(e),this.__cache=e.cache,this.__cache){var t={province:_._$get(e.province),city:_._$get(e.city),area:_._$get(e.area)};this.__selectors=t,this.__offset=t.province.options.length||0,this.__doInitDomEvent([[t.area,"change",this.__onChange._$bind(this,"area")],[t.city,"change",this.__onChange._$bind(this,"city")],[t.province,"change",this.__onChange._$bind(this,"province")]]),this.__cache._$setEvent("onlistload",this.__onListLoad._$bind(this)),this.__doClearSelect(t.province),this._$setRegion(e.data,!0),this.__cache._$getList({key:"province"})}},o.__destroy=function(){this.__super(),this.__cache&&(this.__cache._$recycle(),delete this.__cache),delete this.__cache,delete this.__data,delete this.__selectors},o.__doClearSelect=function(e){e&&(e.options.length=this.__offset)},o.__doFillList=function(e,t){e&&(i._$forEach(t,function(t){e.add(new Option(t,t))}),_._$setStyle(e,"display",t&&t.length?"":"none"))},o.__doSetValue=function(e){var t=this.__data[e]||"";t&&(this.__selectors[e].value=t,delete this.__data[e]),this.__onChange(e)},o.__onChange=function(e){var t=this.__selectors,i=t.province.value;switch(e){case"province":if(this.__doClearSelect(t.city),this.__doClearSelect(t.area),this.__cache._$hasArea(i))_._$setStyle(t.area,"display",""),_._$setStyle(t.city,"display","");else{if(_._$setStyle(t.area,"display","none"),!t.area){_._$setStyle(t.city,"display","none");break}_._$setStyle(t.city,"display","")}t.city&&i&&this.__cache._$getList({key:"city-"+i});break;case"city":this.__doClearSelect(t.area);var s=t.city.value;if(!s)return;this.__cache._$getList({key:"area-"+i+"-"+s})}this._$dispatchEvent("onchange",e)},o.__onListLoad=function(e){var t=e.key,_=t.split("-")[0],i=this.__selectors[_];this.__doFillList(i,this.__cache._$getListInCache(t)),this.__doSetValue(_)},o._$setRegion=function(e,t){this.__data=e||c,t||this.__doSetValue("province")},CMPT&&e.copy(e.P("nej.ut"),a),a});