!function(d,p){var __config={root:{}},__xqueue=[],__scache={},__rcache={},__stack=[],__platform,_doLog=function(){var e,r,n={cursor:"pointer",textAlign:"center",backgroundColor:"#ddd"},t={display:"none",position:"absolute",top:0,right:0,boder:"1px solid #aaa",overflow:"auto",height:"300px",width:"400px",zIndex:"1000",fontSize:"12px",color:"#fff",backgroundColor:"#000",lineHeight:"20px",textAlign:"left"};return function(o){if(!e){e=d.createElement("div");var a=e.style;for(var i in t)a[i]=t[i];d.body.appendChild(e),r=d.createElement("div"),r.title="关闭控制台信息",r.innerHTML="×",a=r.style;for(var i in n)a[i]=n[i];e.appendChild(r),r.onclick=function(){e.style.display="none"},d.attachEvent("onkeypress",function(r){96==r.keyCode&&(e.style.display="block")})}var c=d.createElement("div");c.innerHTML=o,r.insertAdjacentElement("afterEnd",c)}}(),_doInit=function(){!p.console&&d.body&&(p.console={log:_doLog,warn:_doLog,debug:_doLog,error:_doLog});var e=d.getElementsByTagName("script");if(e&&e.length){for(var r,n=/\/define(?:\.cmp)?\.js(?=\?|#|$)/,t=e.length-1;t>=0;t--)r=e[t],r.xxx=!0,n.test(r.src)?_doParseConfig(r.src):_doScriptLoaded(r,!0);__config.global||p.define||(p.define=NEJ.define,p.define.nej=!0)}},_doParseConfig=function(e){if(e=_doFormatURI(e)){var r=e.split(/[?#]/),n=r[0].split("/");n.pop();var t=n.join("/")+"/";t.indexOf("://")<0&&(t=_doAbsoluteURI(t)),__config.root.lib=t;var o=_doStr2Obj(r[1]);__config.charset=o.c||"utf-8",__config.global="true"==o.g,delete o.c,delete o.g,_doParsePlatform(o.p),delete o.p;var a=o.d;delete o.d;var i=__config.root;for(var c in o)i[c]=o[c];i.platform="./platform/",i.pro||(i.pro="../javascript/"),a&&d.write('<script src="'+a+'"></script>')}},_doParseDependency=function(){var e=function(r,n,t){if(!r||!r.length)return null;for(var o,a,i=[],c=0,_=r.length;c<_;c++)o=r[c],t[o]||(t[o]=!0,a=e(n[o],n,t),a&&a.length>0&&i.push.apply(i,a),i.push(o));return i};return function(r,n){return e(r,n,{})}}(),_doSerializeDepList=function(e){if(e){var r=[],n={};for(var t in e){var o=e[t],a=_doFormatURI(t);if(r.push(a),n[a]=o,o&&o.length)for(var i=0,c=o.length;i<c;i++)o[i]=_doFormatURI(o[i])}return _doParseDependency(r,n)}},_doParsePlugin=function(){var e={text:function(e){_doLoadText(e)},json:function(e){_doLoadJSON(e)},regular:function(e){_doLoadText(e)},css:function(e){_doLoadStyle(e)}};return function(r){var n=[],t=null,o=r.split("!"),a=e[o[0].toLowerCase()];return a&&(t=o.shift()),n.push(o.join("!")),n.push(a||_doLoadScript),n.push(t),n}}(),_doParsePlatform=function(){var e=/(cef|ios|win|android)/,r={gk:"G",wk:"W",td:"T"};return function(n){n=n||"td|gk|wk";var t=__config;if(e.test(n)){var o=RegExp.$1;return t.platform="win"==o?/T/i:/W/i,void(t.native="{lib}native/"+o+"/")}var a=[];for(var i in r)n.indexOf(i)>=0&&a.push(r[i]);t.platform=new RegExp(a.join("|"),"i")}}(),_doParsePatchExp=function(){var _reg0=/\s/g,_reg1=/(TR|WR|GR|TV|WV|GV)/i,_reg2=/([<>=]=?)/,_pkey="[VERSION]",_emap={T:"trident",W:"webkit",G:"gecko"},_vmap={R:"release",V:"version"},_doParseVersion=function(e){return e.replace(_reg2,"'$1'")};return function(_exp){if(_exp=(_exp||"").replace(_reg0,""),!_reg1.test(_exp))return null;var _key=RegExp.$1,_brr=_key.split(""),_result={pkey:"engine",vkey:_vmap[_brr[1]]},_pstr=_emap[_brr[0]];_result.isEngOK=function(e){return e==_pstr};var _arr=_exp.split(_key),_left="'"+_doParseVersion(_arr[0])+_pkey+"'",_right="'"+_pkey+_doParseVersion(_arr[1])+"'";return _result.isVerOK=function(_version){var _arr=["true"];return _left&&_arr.push(_left.replace(_pkey,_version)),_right&&_arr.push(_right.replace(_pkey,_version)),eval(_arr.join("&&"))},_result}}(),_doParseCharset=function(e){return e.indexOf(__config.root.lib)>=0?"utf-8":__config.charset},_doMergePlatform=function(){var e=/\\|\//,r=function(r){r=(r||"").replace("{platform}",__config.root.platform);var n=r.split(e),t=n.pop(),o=n.join("/")+"/",a=t.split("."),i="";return a.length>1&&(i="."+a.pop()),[o+t,o+a.join(".")+".patch"+i]};return function(e){for(var n,t={},o=0;n=e[o];o++)n.indexOf("{platform}")>=0&&(n=r(n),e[o]=n[0],t[n[0]]=n[1]);return t}}(),_doMergePatched=function(e){var r=e.toString();if(!(r.indexOf("NEJ.patch")<0)){var n=[],t={},o=NEJ.patch,a=__config.platform;NEJ.patch=function(){var e=_doFormatARG.apply(null,arguments);if(e[0]&&e[1]&&a.test(e[0]))for(var r,o=0,i=e[1].length;o<i;o++)r=e[1][o],t[r]||(t[r]=!0,n.push(r))};try{e()}catch(e){}return NEJ.patch=o,n}},_isTypeOf=function(e,r){return Object.prototype.toString.call(e)==="[object "+r+"]"},_getElement=function(e){return e?e.target||e.srcElement:null},_doStr2Obj=function(e){var r={},n=(e||"").split("&");if(n&&n.length)for(var t,o,a=0,i=n.length;a<i;a++)t=n[a].split("="),o=t.shift(),o&&(r[decodeURIComponent(o)]=decodeURIComponent(t.join("=")));return r},_doAbsoluteURI=function(){var e=!1,r=d.createElement("a"),n=function(){e||(e=!0,r.style.display="none",(d.body||d.getElementsByTagName("head")[0]).appendChild(r))};return function(e){return n(),r.href=e,e=r.href,e.indexOf("://")>0&&e.indexOf("./")<0?e:r.getAttribute("href",4)}}(),_doFormatURI=function(){var e=/{(.*?)}/gi,r=/([^:])\/+/g,n=/[^\/]*$/,t=/\.js$/i,o=/^[{\/\.]/,a=/(file:\/\/)([^\/])/i,i=/([^:])\/\//g,c=function(e){return e.indexOf("://")>0},_=function(e){return e.replace(r,"$1/")},d=function(e){return e.replace(n,"")},f=function(e){return _doAbsoluteURI(e.replace(i,"$1/").replace(a,"$1/$2"))},u=function(e,r){if(t.test(e)||o.test(e)||c(e))return e;var n=e.split("/"),a=__config.root[n[0]],i=r?"":".js";return a?(n.shift(),a+n.join("/")+i):"{lib}"+n.join("/")+i};return function(r,n,t){if(_isTypeOf(r,"Array")){for(var o=[],a=0;a<r.length;a++)o.push(_doFormatURI(r[a],n,t));return o}if(!r)return"";if(c(r))return f(r);n&&0==r.indexOf(".")&&(r=d(n)+r),r=_(u(r,t));var r=r.replace(e,function(e,r){return __config.root[r]||r});return f(r)}}(),_doFormatARG=function(e,r,n){for(var t,o=[null,null,null],a=[function(e){return _isTypeOf(e,"String")},function(e){return _isTypeOf(e,"Array")},function(e){return _isTypeOf(e,"Function")}],i=0,c=arguments.length;i<c;i++){t=arguments[i];for(var _=0,d=a.length;_<d;_++)if(a[_](t)){o[_]=t;break}}return o},_doAddListener=function(){var e=function(e){var r=_getElement(e)||this;if(r){var n=r.readyState;"loaded"!==n&&"complete"!==n||_doScriptLoaded(r,!0)}};return function(r){r.onload?r.xxx=!0:(r.onload=function(e){_doScriptLoaded(_getElement(e),!0)},r.onerror=function(e){_doScriptLoaded(_getElement(e),!1)},r.onreadystatechange=e)}}(),_doAddAllListener=function(){var e=/(?:NEJ\.)?define\s*\(/,r=function(r){var n=r.innerHTML;return n.search(e)>=0};return function(){for(var e,n=d.getElementsByTagName("script"),t=n.length-1;t>=0;t--)e=n[t],e.xxx||(e.xxx=!0,!e.src&&r(e)?_doClearStack():_doAddListener(n[t]))}}(),_doClearScript=function(e){e&&e.parentNode&&(e.onload=null,e.onerror=null,e.onreadystatechange=null,e.parentNode.removeChild(e))},_isFinishLoaded=function(){for(var e in __scache)if(0===__scache[e])return!1;return!0},_isListLoaded=function(e){if(e&&e.length)for(var r=e.length-1;r>=0;r--)if(2!==__scache[e[r]])return!1;return!0},_isMapLoaded=function(e){if(e)for(var r in e)if(2!==__scache[e[r]])return!1;return!0},_doLoadText=function(){var e,r=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=function(){if(p.XMLHttpRequest)return new p.XMLHttpRequest;if(e)return new ActiveXObject(e);for(var n,t=0,o=r.length;t<o;t++)try{n=r[t];var a=new ActiveXObject(n);return e=n,a}catch(e){}};return function(e,r){if(e){var t=__scache[e];if(null==t){__scache[e]=0;var o=n();o.onreadystatechange=function(){if(4==o.readyState){var n=o.responseText||"";__scache[e]=2,__rcache[e]=n,r&&r(n),_doCheckLoading()}},o.open("GET",e,!0),o.send(null)}}}}(),_doLoadJSON=function(_uri){_doLoadText(_uri,function(_text){var _data;try{_data=p.JSON&&JSON.parse?JSON.parse(_text):eval("("+_text+")")}catch(e){_data=null}__rcache[_uri]=_data})},_doLoadScript=function(e){if(e){var r=__scache[e];if(null==r){__scache[e]=0;var n=d.createElement("script");n.xxx=!0,n.type="text/javascript",n.charset=_doParseCharset(e),_doAddListener(n),n.src=e,(d.getElementsByTagName("head")[0]||d.body).appendChild(n)}}},_doLoadStyle=function(e){if(e){var r=__scache[e];if(null==r){__scache[e]=2,__rcache[e]=" ";var n=d.createElement("link");n.rel="stylesheet",(d.getElementsByTagName("head")[0]||d.body).appendChild(n),n.href=e}}},_doScriptLoaded=function(e,r){var n=_doFormatURI(e.src);if(n){var t=__stack.pop();t&&(t.unshift(n),_doDefine.apply(p,t)),n&&1!=__scache[n]&&(__scache[n]=2),_doClearScript(e),_doCheckLoading()}},_doFindCircularRef=function(){var e,r=function(e,r){for(var n=e.length-1;n>=0;n--)if(e[n].n==r)return n;return-1},n=function(t){if(t){var o=r(e,t.n);if(o>=0)return t;e.push(t);var a=t.d;if(a&&a.length)for(var i,o=0,c=a.length;o<c;o++)if(i=n(__xqueue[r(__xqueue,a[o])]))return i}},t=function(e,r){if(r){for(var n,t=[],o=0,a=e.length;o<a;o++)n=e[o],r[n]&&t.push(n);for(var n,i={},o=0,a=__xqueue.length;o<a;o++)n=__xqueue[o],i[n.n]=n;for(var n,c,o=0,a=t.length;o<a;o++)n=t[o],c=i[n],c&&_doExecFunction(c),c=i[r[n]],c&&_doExecFunction(c)}};return function(){e=[];var r=n(__xqueue[0]);return r&&t(r.d,r.p),r}}(),_doExecFunction=function(){var e=function(){return!1},r=function(r,n){var t=[];if(r)for(var o,a=0,i=r.length;a<i;a++)o=r[a],__rcache[o]||n[o]||(__rcache[o]={}),t.push(__rcache[o]||__rcache[n[o]]||{});return t.push({},{},e,[]),t},n=function(e,r){var n=__rcache[e],t="[object Object]"=={}.toString.call(r);if(r)if(n&&t){n=n||{};for(var o in r)n[o]=r[o]}else n=r;__rcache[e]=n;var a=__config.root.lib+"base/platform.js";e===a&&(__platform=n)};return function(e){var t=r(e.d,e.p);if(e.f){var o=e.f.apply(p,t)||t[t.length-4];n(e.n,o)}__scache[e.n]=2,console.log("do "+e.n)}}(),_doCheckLoading=function(){if(__xqueue.length){for(var e,r=__xqueue.length-1;r>=0;)e=__xqueue[r],2===__scache[e.n]||_isMapLoaded(e.p)&&_isListLoaded(e.h)&&_isListLoaded(e.d)?(__xqueue.splice(r,1),2!==__scache[e.n]&&_doExecFunction(e),r=__xqueue.length-1):r--;if(__xqueue.length>0&&_isFinishLoaded()){var e=_doFindCircularRef()||__xqueue.pop();console.warn("try to unlock circular reference -> "+e.n),_doExecFunction(e),_doCheckLoading()}}},_doClearStack=function(){for(var e=__stack.pop();e;)_doDefine.apply(p,e),e=__stack.pop()},_doFindScriptRunning=function(){for(var e,r=d.getElementsByTagName("script"),n=r.length-1;n>=0;n--)if(e=r[n],"interactive"==e.readyState)return e},_doDefine=function(){var e=+new Date,r=["d","h"],n=function(e,r){if(e&&e.length)for(var n,t=0,o=e.length;t<o;t++)n=e[t]||"",0==n.indexOf(".")&&(e[t]=_doFormatURI(n,r))};return function(t,o,a){var i=_doFormatARG.apply(p,arguments);if(t=i[0]||_doFormatURI("./"+e++ +".js"),o=i[1],a=i[2],t=_doFormatURI(t),2!==__scache[t]){var c;o&&(c=_doMergePlatform(o));var _;a&&(_=_doMergePatched(a)),n(o,t),__scache[t]=1;var d={n:t,d:o,h:_,f:a};__xqueue.push(d);for(var f,u,l=0,s=r.length;l<s;l++)if(f=r[l],u=d[f],u&&u.length){for(var h,g,v,x={},m=0,y=u.length;m<y;m++)h=u[m],h||console.warn("empty dep uri for "+t),v=_doParsePlugin(h),g=_doFormatURI(v[0],t,v[2]),x[h]=g,u[m]=g,v[1](g);"h"===f&&d.f&&(d.f.kmap=x)}if(c){var L={};for(var E in c)f=_doFormatURI(c[E],t),L[_doFormatURI(E,t)]=f,_doLoadScript(f);d.p=L}_doCheckLoading()}}}();p.NEJ={},p.NEJ.dump=function(){return{state:__scache,result:__rcache,queue:__xqueue}},NEJ.define=function(e,r,n){if(_isTypeOf(e,"String"))return _doDefine.apply(p,arguments);var t=[].slice.call(arguments,0),o=_doFindScriptRunning();if(o){var a=o.src;return a&&t.unshift(_doFormatURI(a)),_doDefine.apply(p,t)}__stack.push(t),_doAddAllListener()},NEJ.patch=function(e,r,n){var t=_doFormatARG.apply(null,arguments);if(t[0]){var o=__platform._$KERNEL,a=_doParsePatchExp(t[0]);if(a&&t[2]&&a.isEngOK(o[a.pkey])&&a.isVerOK(o[a.vkey])){var i=[],r=t[1];if(r)for(var c=arguments.callee.caller.kmap||{},_=0,d=r.length;_<d;_++)i.push(__rcache[c[r[_]]]||{});t[2].apply(p,i)}}},NEJ.deps=function(e,r){var n=_doSerializeDepList(e);if(n&&n.length){var e={};if(r&&r.length>0)for(var t=0,o=r.length;t<o;t++)e[_doFormatURI(r[t])]=!0;for(var t=n.length-1;t>=0;t--)e[n[t]]&&n.splice(t,1);for(var a,i=[],t=0,o=n.length;t<o;t++)a=n[t],i.push('<script src="'+a+'"></script>'),__scache[a]=2;d.writeln(i.join(""))}},p.CMPT=!0,p.DEBUG=!0,_doInit()}(document,window);